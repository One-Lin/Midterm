<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>數量增減購物車</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .product { margin: 20px 0; }
        .cart { border: 1px solid #ccc; padding: 10px; }
        .cart-item { margin-bottom: 10px; }
        .quantity-controls { display: inline-flex; align-items: center; }
        .quantity-controls button { margin: 0 5px; }
    </style>
</head>
<body>
    <h1>商品列表</h1>
    <div class="product">
        <h2>產品 1</h2>
        <p>價格: NT$100</p>
        <button onclick="addToCart('產品 1', 100)">加入購物車</button>
    </div>
    <div class="product">
        <h2>產品 2</h2>
        <p>價格: NT$150</p>
        <button onclick="addToCart('產品 2', 150)">加入購物車</button>
    </div>

    <h1>購物車</h1>
    <div id="cart" class="cart">
        <div id="cart-items"></div>
        <p>總計: NT$<span id="total">0</span></p>
        <button onclick="checkout()">結帳</button>
    </div>

    <script>
        let cart = [];

        // 將商品加入購物車
        function addToCart(productName, productPrice) {
            let existingProduct = cart.find(item => item.name === productName);
            if (existingProduct) {
                // 如果商品已存在，增加數量
                existingProduct.quantity++;
            } else {
                // 否則新增商品並設置數量為1
                cart.push({ name: productName, price: productPrice, quantity: 1 });
            }
            updateCart();
        }

        // 更新購物車顯示
        function updateCart() {
            const cartItemsElement = document.getElementById('cart-items');
            const totalElement = document.getElementById('total');
            cartItemsElement.innerHTML = '';

            let total = 0;
            cart.forEach((item) => {
                cartItemsElement.innerHTML += `
                    <div class="cart-item">
                        ${item.name} - NT$${item.price} x 
                        <div class="quantity-controls">
                            <button onclick="changeQuantity('${item.name}', -1)">-</button>
                            <span>${item.quantity}</span>
                            <button onclick="changeQuantity('${item.name}', 1)">+</button>
                        </div>
                    </div>
                `;
                total += item.price * item.quantity;
            });

            totalElement.textContent = total;
            localStorage.setItem('cart', JSON.stringify(cart)); // 儲存至 localStorage
        }

        // 改變商品數量
        function changeQuantity(productName, delta) {
            let product = cart.find(item => item.name === productName);
            if (product) {
                product.quantity += delta;
                if (product.quantity <= 0) {
                    cart = cart.filter(item => item.name !== productName); // 如果數量為0，刪除商品
                }
                updateCart();
            }
        }

        // 頁面載入時讀取購物車資料
        window.onload = function() {
            const storedCart = localStorage.getItem('cart');
            if (storedCart) {
                cart = JSON.parse(storedCart);
                updateCart();
            }
        };

        // 結帳處理
        function checkout() {
            if (cart.length === 0) {
                alert('購物車是空的！');
            } else {
                alert('結帳中...');
                // 這裡可以將購物車資料送到後端進行處理
            }
        }
    </script>
</body>
</html>
